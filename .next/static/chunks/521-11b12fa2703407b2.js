"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[521],{63:(e,t,a)=>{var r=a(7260);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},521:(e,t,a)=>{a.d(t,{A:()=>h});var r=a(5155),s=a(2115),l=a(2619),i=a.n(l),n=a(5239),o=a(9523),c=a(63);function d(e){var t,a,l,i;let{className:n=""}=e,[d,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(null),[x,p]=(0,s.useState)({canCreateContests:!1,canManagePayouts:!1,canManagePlatform:!1}),[f,g]=(0,s.useState)(!0),[v,b]=(0,s.useState)(null),w=(0,c.useRouter)(),j=(0,s.useCallback)(async()=>{if(!v)return;let{data:{user:e}}=await v.auth.getUser();if(m(e),e){let{data:t}=await v.from("profiles").select("is_admin").eq("id",e.id).single();p({canCreateContests:!0,canManagePayouts:(null==t?void 0:t.is_admin)||e.email&&e.email.endsWith("@creativechallenge.app"),canManagePlatform:(null==t?void 0:t.is_admin)||e.email&&e.email.endsWith("@creativechallenge.app")})}g(!1)},[v]);(0,s.useEffect)(()=>{b((0,o.U)())},[]),(0,s.useEffect)(()=>{v&&j()},[v,j]);let y=async()=>{if(v)try{await v.auth.signOut(),w.push("/"),w.refresh()}catch(e){console.error("Error logging out:",e)}},N=[{label:"\uD83C\uDFE0 Home",href:"/",description:"Back to main page"},{label:"\uD83C\uDFA8 Contest Gallery",href:"/authenticated-home",description:"View active contests"},{label:"❤️ My Favorites",href:"/favorites",description:"Saved artwork & collections"},{label:"\uD83D\uDC65 Discover Artists",href:"/artists",description:"Explore talented creators"},{label:"\uD83D\uDCB0 My Payouts",href:"/payouts",description:"Track your winnings"},{label:"\uD83D\uDC64 My Profile",href:"/profile",description:"Manage your account"},...x.canCreateContests?[{label:"\uD83C\uDFC6 Create Contest",href:"/admin/create-contest",description:"Suggest or create new contests"}]:[],...x.canCreateContests?[{label:"\uD83D\uDCCA Revenue Transparency",href:"/revenue-dashboard",description:"View platform revenue & fairness"}]:[],...x.canManagePayouts?[{label:"\uD83D\uDCB8 Payout Management",href:"/admin/payouts",description:"Process contest payouts"}]:[],...x.canManagePlatform?[{label:"⚙️ Platform Management",href:"/admin/dashboard",description:"Full platform administration"}]:[]];return f?(0,r.jsx)("div",{className:"relative ".concat(n),children:(0,r.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full animate-pulse"})}):h?(0,r.jsxs)("div",{className:"relative ".concat(n),children:[(0,r.jsxs)("button",{onClick:()=>u(!d),className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-full p-2 border border-white/20 hover:bg-white/20 transition-all duration-300",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:(null==(t=h.email)?void 0:t.charAt(0).toUpperCase())||"U"}),(0,r.jsxs)("div",{className:"hidden md:block text-left",children:[(0,r.jsx)("div",{className:"text-white text-sm font-medium",children:(null==(a=h.email)?void 0:a.split("@")[0])||"User"}),(x.canCreateContests||x.canManagePayouts||x.canManagePlatform)&&(0,r.jsx)("div",{className:"text-xs text-yellow-400",children:x.canManagePlatform?"Admin":x.canManagePayouts?"Payout Manager":"Contest Creator"})]}),(0,r.jsx)("svg",{className:"w-4 h-4 text-white/70 transition-transform duration-200 ".concat(d?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),(0,r.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20 shadow-xl z-50 overflow-hidden",children:[(0,r.jsx)("div",{className:"p-4 border-b border-white/10",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:(null==(l=h.email)?void 0:l.charAt(0).toUpperCase())||"U"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-white font-semibold",children:(null==(i=h.email)?void 0:i.split("@")[0])||"User"}),(0,r.jsx)("div",{className:"text-white/60 text-sm",children:h.email}),(x.canCreateContests||x.canManagePayouts||x.canManagePlatform)&&(0,r.jsxs)("div",{className:"text-xs text-yellow-400 font-medium",children:["⚡ ",x.canManagePlatform?"Administrator":x.canManagePayouts?"Payout Manager":"Contest Creator"]})]})]})}),(0,r.jsx)("div",{className:"py-2",children:N.map((e,t)=>(0,r.jsxs)("button",{onClick:()=>{w.push(e.href),u(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-white/10 transition-colors duration-200 group",children:[(0,r.jsx)("div",{className:"text-lg",children:e.label.split(" ")[0]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"text-white font-medium",children:e.label.split(" ").slice(1).join(" ")}),(0,r.jsx)("div",{className:"text-white/60 text-xs",children:e.description})]}),(0,r.jsx)("svg",{className:"w-4 h-4 text-white/40 group-hover:text-white/70 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},t))}),(0,r.jsx)("div",{className:"border-t border-white/10"}),(0,r.jsx)("div",{className:"p-2",children:(0,r.jsxs)("button",{onClick:y,className:"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-red-500/20 transition-colors duration-200 group rounded-lg",children:[(0,r.jsx)("div",{className:"text-lg",children:"\uD83D\uDEAA"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"text-red-400 font-medium group-hover:text-red-300",children:"Sign Out"}),(0,r.jsx)("div",{className:"text-white/60 text-xs",children:"End your session"})]}),(0,r.jsx)("svg",{className:"w-4 h-4 text-red-400/60 group-hover:text-red-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})]})})]})]})]}):(0,r.jsx)("div",{className:"relative ".concat(n),children:(0,r.jsx)("button",{onClick:()=>w.push("/auth"),className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:from-pink-600 hover:to-purple-700 transition-all duration-300",children:"Sign In"})})}function u(){let[e,t]=(0,s.useState)(""),[a,l]=(0,s.useState)([]),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1),m=(0,s.useRef)(null),x=(0,o.U)();(0,s.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let p=async e=>{if(e.length<2)return void l([]);h(!0);try{let{data:t}=await x.from("submissions").select("\n          id,\n          title,\n          description,\n          image_url,\n          profiles!inner(username, full_name, avatar_url)\n        ").or("title.ilike.%".concat(e,"%, description.ilike.%").concat(e,"%")).limit(5),{data:a}=await x.from("profiles").select("id, username, full_name, avatar_url").or("username.ilike.%".concat(e,"%, full_name.ilike.%").concat(e,"%")).limit(5),r=[...(t||[]).map(e=>{let t=Array.isArray(e.profiles)?e.profiles[0]:e.profiles;return{id:e.id,type:"artwork",title:e.title,description:e.description,image_url:e.image_url,username:t.username,full_name:t.full_name,avatar_url:t.avatar_url}}),...(a||[]).map(e=>({id:e.id,type:"artist",title:e.full_name||e.username,username:e.username,avatar_url:e.avatar_url}))];l(r)}catch(e){console.error("Search error:",e)}finally{h(!1)}},f=()=>{d(!1),t("")};return(0,r.jsxs)("div",{className:"relative",ref:m,children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search artworks and artists...",value:e,onChange:e=>{let a=e.target.value;t(a),p(a),d(a.length>0)},onFocus:()=>e.length>0&&d(!0),className:"w-full md:w-80 px-4 py-3 pl-12 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500/50 transition-all duration-300"}),(0,r.jsx)("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:u?(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"}):(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),c&&(0,r.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white/95 backdrop-blur-sm border border-white/20 rounded-xl shadow-2xl z-50 max-h-96 overflow-y-auto",children:0===a.length&&e.length>1?(0,r.jsxs)("div",{className:"p-4 text-gray-500 text-center",children:['No results found for "',e,'"']}):(0,r.jsx)("div",{className:"py-2",children:a.map(e=>(0,r.jsx)(i(),{href:"artwork"===e.type?"/artwork/".concat(e.id):"/artist/".concat(e.id),onClick:f,className:"flex items-center p-4 hover:bg-white/10 transition-colors duration-200",children:"artwork"===e.type?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-gray-200 flex-shrink-0",children:e.image_url?(0,r.jsx)(n.default,{src:e.image_url,alt:e.title,width:48,height:48,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-purple-400 to-pink-500 flex items-center justify-center text-white font-bold",children:"\uD83C\uDFA8"})}),(0,r.jsxs)("div",{className:"ml-4 flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"text-gray-900 font-semibold truncate",children:e.title}),(0,r.jsx)("div",{className:"text-sm text-gray-600 truncate",children:e.description}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["by ",e.username]})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200 flex-shrink-0",children:e.avatar_url?(0,r.jsx)(n.default,{src:e.avatar_url,alt:e.title,width:48,height:48,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white font-bold",children:e.title.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"ml-4 flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"text-gray-900 font-semibold",children:e.title}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["@",e.username]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Artist"})]})]})},"".concat(e.type,"-").concat(e.id)))})})]})}function h(e){let{showLogo:t=!0,className:a=""}=e,[l,o]=(0,s.useState)(!1),c=[{label:"Home",href:"/",icon:"\uD83C\uDFE0"},{label:"Gallery",href:"/gallery",icon:"\uD83C\uDFA8"},{label:"Competitions",href:"/competitions",icon:"\uD83C\uDFC6"},{label:"Submit",href:"/submit",icon:"\uD83D\uDCE4"},{label:"Profile",href:"/profile",icon:"\uD83D\uDC64"}];return(0,r.jsx)("header",{className:"bg-white/5 backdrop-blur-sm border-b border-white/10 sticky top-0 z-30 ".concat(a),children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[t&&(0,r.jsxs)(i(),{href:"/",className:"flex items-center gap-3 hover:opacity-80 transition-all duration-300",children:[(0,r.jsx)(n.default,{src:"/creative-challenge-logo.png",alt:"Creative Challenge Logo",width:40,height:40,className:"rounded-lg"}),(0,r.jsx)("span",{className:"hidden sm:block text-white font-bold text-xl font-black tracking-wide",style:{fontFamily:'var(--font-bebas-neue), "Arial Black", "Impact", sans-serif',background:"linear-gradient(45deg, #FFD700, #FFA500, #FF8C00, #FFD700, #FFA500)",backgroundSize:"200% 200%",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",animation:"goldenShimmer 2s ease-in-out infinite",textShadow:"2px 2px 0px #8B4513, 4px 4px 0px #654321",filter:"drop-shadow(1px 1px 3px rgba(0,0,0,0.7))",fontWeight:"900",letterSpacing:"0.1em",textTransform:"uppercase",fontStyle:"normal"},children:"LET'S SPARK CREATIVITY"})]}),(0,r.jsx)("nav",{className:"hidden md:flex items-center gap-6",children:c.map(e=>(0,r.jsxs)(i(),{href:e.href,className:"flex items-center gap-2 text-white/70 hover:text-white transition-colors duration-200 px-3 py-2 rounded-lg hover:bg-white/10",children:[(0,r.jsx)("span",{children:e.icon}),(0,r.jsx)("span",{children:e.label})]},e.href))}),(0,r.jsx)("div",{className:"hidden md:block",children:(0,r.jsx)(u,{})}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(d,{}),(0,r.jsx)("button",{onClick:()=>o(!l),className:"md:hidden p-3 text-white/70 hover:text-white transition-colors rounded-lg hover:bg-white/10",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l?(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),l&&(0,r.jsx)("div",{className:"md:hidden border-t border-white/10 bg-white/5 backdrop-blur-sm",children:(0,r.jsx)("div",{className:"px-4 py-4 space-y-2",children:c.map(e=>(0,r.jsxs)(i(),{href:e.href,onClick:()=>o(!1),className:"flex items-center gap-3 text-white/70 hover:text-white transition-colors duration-200 px-3 py-3 rounded-lg hover:bg-white/10",children:[(0,r.jsx)("span",{className:"text-lg",children:e.icon}),(0,r.jsx)("span",{children:e.label})]},e.href))})})]})})}},9523:(e,t,a)=>{a.d(t,{U:()=>l});var r=a(7559),s=a(5704);function l(){let e=s.env.NEXT_PUBLIC_SUPABASE_URL||"https://yrbbqxdimyqdfmezxmgp.supabase.co",t=s.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlyYmJxeGRpbXlxZGZtZXp4bWdwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MjM5NjksImV4cCI6MjA3MjA5OTk2OX0.yR40mcHEsVoue4LDaT5GzKpbUk9VdwY7SeJ28JNBBKU";return(0,r.createBrowserClient)(e,t)}}}]);
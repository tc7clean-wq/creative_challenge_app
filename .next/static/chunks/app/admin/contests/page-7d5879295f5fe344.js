(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2982],{1598:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),i=s(2115),r=s(9523),l=s(3702),n=s(1175);function d(){let[e,t]=(0,i.useState)([]),[s,d]=(0,i.useState)(!0),[o,c]=(0,i.useState)(!1),[u,h]=(0,i.useState)(null),[x,m]=(0,i.useState)({title:"",description:"",prize_amount:1e3,start_date:"",end_date:""});(0,i.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=(0,r.U)(),{data:s,error:a}=await e.from("contests").select("\n          *,\n          submissions(count)\n        ").order("created_at",{ascending:!1});if(a)return;let i=(null==s?void 0:s.map(e=>{var t,s;return{id:e.id||"",title:e.title||"",description:e.description||"",prize_amount:e.prize_amount||0,start_date:e.start_date||"",end_date:e.end_date||"",status:e.status||"draft",created_at:e.created_at||"",submissions_count:(null==(s=e.submissions)||null==(t=s[0])?void 0:t.count)||0}}))||[];t(i)}catch(e){}finally{d(!1)}},b=async e=>{e.preventDefault();try{let e=(0,r.U)(),{error:t}=await e.from("contests").insert({title:x.title,description:x.description,prize_amount:x.prize_amount,start_date:x.start_date,end_date:x.end_date,status:"draft"});if(t)return void alert("Failed to create contest");m({title:"",description:"",prize_amount:1e3,start_date:"",end_date:""}),c(!1),p()}catch(e){alert("Failed to create contest")}},g=async e=>{if(e.preventDefault(),u)try{let e=(0,r.U)(),{error:t}=await e.from("contests").update({title:x.title,description:x.description,prize_amount:x.prize_amount,start_date:x.start_date,end_date:x.end_date}).eq("id",u.id);if(t)return void alert("Failed to update contest");h(null),m({title:"",description:"",prize_amount:1e3,start_date:"",end_date:""}),p()}catch(e){alert("Failed to update contest")}},f=async(e,t)=>{try{let s=(0,r.U)(),{error:a}=await s.from("contests").update({status:t}).eq("id",e);if(a)return void alert("Failed to update contest status");p()}catch(e){alert("Failed to update contest status")}};return s?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white text-2xl",children:"Loading contests..."})}):(0,a.jsx)(n.A,{children:(0,a.jsxs)("div",{className:"min-h-screen cyber-bg",children:[(0,a.jsx)(l.A,{}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-5xl font-bold text-white mb-4",style:{fontFamily:'var(--font-bebas-neue), "Arial Black", "Impact", sans-serif',background:"linear-gradient(45deg, #FFD700, #FFA500, #FF8C00)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"CONTEST MANAGEMENT"}),(0,a.jsx)("p",{className:"text-xl text-white/80",children:"Create, manage, and archive contests"})]}),(0,a.jsx)("button",{onClick:()=>{c(!0),h(null),m({title:"",description:"",prize_amount:1e3,start_date:"",end_date:""})},className:"bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105",children:"➕ New Contest"})]}),o&&(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-8 border border-white/20 mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:u?"Edit Contest":"Create New Contest"}),(0,a.jsxs)("form",{onSubmit:u?g:b,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-semibold mb-2",children:"Title *"}),(0,a.jsx)("input",{type:"text",value:x.title,onChange:e=>m({...x,title:e.target.value}),className:"w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:border-yellow-500",placeholder:"Contest title",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-semibold mb-2",children:"Prize Amount ($) *"}),(0,a.jsx)("input",{type:"number",value:x.prize_amount,onChange:e=>m({...x,prize_amount:parseInt(e.target.value)}),className:"w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:border-yellow-500",min:"100",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-semibold mb-2",children:"Description *"}),(0,a.jsx)("textarea",{value:x.description,onChange:e=>m({...x,description:e.target.value}),className:"w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:border-yellow-500 h-32 resize-none",placeholder:"Contest description and rules",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-semibold mb-2",children:"Start Date *"}),(0,a.jsx)("input",{type:"datetime-local",value:x.start_date,onChange:e=>m({...x,start_date:e.target.value}),className:"w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:border-yellow-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-semibold mb-2",children:"End Date *"}),(0,a.jsx)("input",{type:"datetime-local",value:x.end_date,onChange:e=>m({...x,end_date:e.target.value}),className:"w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:border-yellow-500",required:!0})]})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{type:"submit",className:"bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-black font-bold py-3 px-6 rounded-lg transition-all duration-300",children:u?"Update Contest":"Create Contest"}),(0,a.jsx)("button",{type:"button",onClick:()=>{c(!1),h(null)},className:"bg-white/10 hover:bg-white/20 text-white py-3 px-6 rounded-lg transition-all duration-300",children:"Cancel"})]})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:0===e.length?(0,a.jsx)("div",{className:"text-center text-white/60 text-xl py-12",children:"No contests yet. Create your first contest!"}):e.map(e=>(0,a.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-white",children:e.title}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-white text-sm font-semibold ".concat((e=>{switch(e){case"draft":default:return"bg-gray-500";case"active":return"bg-green-500";case"finished":return"bg-blue-500";case"archived":return"bg-gray-700"}})(e.status)),children:e.status.toUpperCase()})]}),(0,a.jsx)("p",{className:"text-white/80 mb-4",children:e.description}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white/60",children:"Prize:"}),(0,a.jsxs)("span",{className:"text-yellow-400 font-bold ml-2",children:["$",e.prize_amount.toLocaleString()]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white/60",children:"Submissions:"}),(0,a.jsx)("span",{className:"text-white font-bold ml-2",children:e.submissions_count})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white/60",children:"Start:"}),(0,a.jsx)("span",{className:"text-white ml-2",children:new Date(e.start_date).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white/60",children:"End:"}),(0,a.jsx)("span",{className:"text-white ml-2",children:new Date(e.end_date).toLocaleDateString()})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 ml-6",children:[(0,a.jsx)("button",{onClick:()=>{h(e),m({title:e.title,description:e.description,prize_amount:e.prize_amount,start_date:e.start_date,end_date:e.end_date}),c(!0)},className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg text-sm transition-colors",children:"✏️ Edit"}),"draft"===e.status&&(0,a.jsx)("button",{onClick:()=>f(e.id,"active"),className:"bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg text-sm transition-colors",children:"▶️ Start"}),"active"===e.status&&(0,a.jsx)("button",{onClick:()=>f(e.id,"finished"),className:"bg-orange-500 hover:bg-orange-600 text-white py-2 px-4 rounded-lg text-sm transition-colors",children:"⏹️ Finish"}),"finished"===e.status&&(0,a.jsx)("button",{onClick:()=>f(e.id,"archived"),className:"bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg text-sm transition-colors",children:"\uD83D\uDCE6 Archive"})]})]})},e.id))})]})]})})}},6185:(e,t,s)=>{Promise.resolve().then(s.bind(s,1598))}},e=>{e.O(0,[7559,2619,1996,8441,1255,7358],()=>e(e.s=6185)),_N_E=e.O()}]);
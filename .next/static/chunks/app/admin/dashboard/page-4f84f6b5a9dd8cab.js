(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5957],{2809:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var i=s(5155),r=s(9523),a=s(2115),l=s(2619),o=s.n(l),n=s(521),d=s(8993);function c(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)([]),[c,m]=(0,a.useState)({total_revenue:0,platform_cut:0,prize_pool_contribution:0,entry_fees:0,submission_pins:0,vote_multipliers:0,profile_boosts:0,transaction_count:0}),[x,h]=(0,a.useState)([]),[u,b]=(0,a.useState)(!0),[p,g]=(0,a.useState)(null),[v,N]=(0,a.useState)({canCreateContests:!1,canManagePayouts:!1,canManagePlatform:!1}),[j,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{f((0,r.U)())},[]),(0,a.useEffect)(()=>{j&&(async()=>{let{data:{user:e}}=await j.auth.getUser();if(g(e),e){let{data:s}=await j.from("profiles").select("is_admin").eq("id",e.id).single(),i=(null==s?void 0:s.is_admin)||e.email&&e.email.endsWith("@creativechallenge.app"),r=(null==s?void 0:s.is_admin)||e.email&&e.email.endsWith("@creativechallenge.app");if(N({canCreateContests:!0,canManagePayouts:i,canManagePlatform:r}),r){let{data:e}=await j.from("contests").select("*").order("created_at",{ascending:!1});t(e||[]);let{data:s}=await j.from("category_votes").select("*").order("vote_count",{ascending:!1});l(s||[]);let{data:i}=await j.from("revenue_transactions").select("*");if(i){let e=i.reduce((e,t)=>e+Number(t.amount_paid),0),t=i.reduce((e,t)=>e+Number(t.platform_cut),0),s=i.reduce((e,t)=>e+Number(t.prize_pool_contribution),0),r=i.filter(e=>"entry_fee"===e.transaction_type).reduce((e,t)=>e+Number(t.amount_paid),0),a=i.filter(e=>"submission_pin"===e.transaction_type).reduce((e,t)=>e+Number(t.amount_paid),0);m({total_revenue:e,platform_cut:t,prize_pool_contribution:s,entry_fees:r,submission_pins:a,vote_multipliers:i.filter(e=>"vote_multiplier"===e.transaction_type).reduce((e,t)=>e+Number(t.amount_paid),0),profile_boosts:i.filter(e=>"profile_boost"===e.transaction_type).reduce((e,t)=>e+Number(t.amount_paid),0),transaction_count:i.length})}h(await Promise.all((e||[]).map(async e=>{let{data:t}=await j.from("revenue_transactions").select("*").eq("contest_id",e.id),{data:s}=await j.from("submission_pins").select("id").eq("status","active"),{data:i}=await j.from("vote_multipliers").select("id").eq("contest_id",e.id),{data:r}=await j.from("profile_boosts").select("id").eq("status","active"),a=(null==t?void 0:t.reduce((e,t)=>e+Number(t.amount_paid),0))||0,l=(null==t?void 0:t.reduce((e,t)=>e+Number(t.platform_cut),0))||0,o=(null==t?void 0:t.reduce((e,t)=>e+Number(t.prize_pool_contribution),0))||0;return{id:e.id,title:e.title,total_revenue:a,platform_cut:l,prize_pool:o,submission_count:e.submission_count||0,pin_count:(null==s?void 0:s.length)||0,multiplier_count:(null==i?void 0:i.length)||0,boost_count:(null==r?void 0:r.length)||0}})))}}b(!1)})()},[j]);let w=async e=>{if(!j)return;let{error:t}=await j.from("category_votes").insert([{category:e,vote_count:0}]);t||l(t=>[...t,{id:Date.now().toString(),category:e,vote_count:0}])};return u?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-white"})}):p?v.canManagePlatform?(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:[(0,i.jsx)(n.A,{}),(0,i.jsxs)("header",{className:"relative overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-500/20 via-purple-500/20 to-blue-500/20 animate-pulse"}),(0,i.jsx)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-red-500 to-pink-600 rounded-xl flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-white font-bold text-xl",children:"A"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Admin Dashboard"}),(0,i.jsx)("p",{className:"text-white/60 text-sm",children:"Manage contests and community"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)(o(),{href:"/authenticated-home",className:"px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors",children:"View Site"}),(0,i.jsx)(d.default,{})]})]})})]}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20 mb-8",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:(0,i.jsx)("span",{className:"bg-gradient-to-r from-green-400 to-emerald-500 bg-clip-text text-transparent",children:"\uD83D\uDCB0 Revenue Analytics"})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,i.jsxs)("div",{className:"text-2xl font-bold text-green-400 mb-1",children:["$",c.total_revenue.toLocaleString()]}),(0,i.jsx)("div",{className:"text-white/60 text-sm",children:"Total Revenue"})]}),(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,i.jsxs)("div",{className:"text-2xl font-bold text-blue-400 mb-1",children:["$",c.platform_cut.toLocaleString()]}),(0,i.jsx)("div",{className:"text-white/60 text-sm",children:"Your Platform Cut"})]}),(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,i.jsxs)("div",{className:"text-2xl font-bold text-yellow-400 mb-1",children:["$",c.prize_pool_contribution.toLocaleString()]}),(0,i.jsx)("div",{className:"text-white/60 text-sm",children:"Prize Pool Contribution"})]}),(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-purple-400 mb-1",children:c.transaction_count}),(0,i.jsx)("div",{className:"text-white/60 text-sm",children:"Total Transactions"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 rounded-lg p-4 border border-blue-500/30",children:[(0,i.jsxs)("div",{className:"text-lg font-bold text-blue-400 mb-1",children:["$",c.entry_fees.toLocaleString()]}),(0,i.jsx)("div",{className:"text-white/60 text-sm",children:"Entry Fees"}),(0,i.jsx)("div",{className:"text-white/40 text-xs",children:"60% to prize pool"})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-lg p-4 border border-pink-500/30",children:[(0,i.jsxs)("div",{className:"text-lg font-bold text-pink-400 mb-1",children:["$",c.submission_pins.toLocaleString()]}),(0,i.jsx)("div",{className:"text-white/60 text-sm",children:"Submission Pins"}),(0,i.jsx)("div",{className:"text-white/40 text-xs",children:"80% to prize pool"})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-r from-green-500/20 to-emerald-500/20 rounded-lg p-4 border border-green-500/30",children:[(0,i.jsxs)("div",{className:"text-lg font-bold text-green-400 mb-1",children:["$",c.vote_multipliers.toLocaleString()]}),(0,i.jsx)("div",{className:"text-white/60 text-sm",children:"Vote Multipliers"}),(0,i.jsx)("div",{className:"text-white/40 text-xs",children:"80% to prize pool"})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-lg p-4 border border-purple-500/30",children:[(0,i.jsxs)("div",{className:"text-lg font-bold text-purple-400 mb-1",children:["$",c.profile_boosts.toLocaleString()]}),(0,i.jsx)("div",{className:"text-white/60 text-sm",children:"Profile Boosts"}),(0,i.jsx)("div",{className:"text-white/40 text-xs",children:"80% to prize pool"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20 mb-8",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:(0,i.jsx)("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent",children:"\uD83D\uDCCA Contest Performance"})}),(0,i.jsx)("div",{className:"space-y-4",children:x.map(e=>(0,i.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-white font-semibold",children:e.title}),(0,i.jsxs)("p",{className:"text-white/60 text-sm",children:[e.submission_count," submissions • ",e.pin_count," pins • ",e.multiplier_count," multipliers • ",e.boost_count," boosts"]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsxs)("div",{className:"text-xl font-bold text-green-400",children:["$",e.total_revenue.toLocaleString()]}),(0,i.jsx)("div",{className:"text-white/60 text-sm",children:"Total Revenue"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"text-blue-400 font-bold",children:["$",e.platform_cut.toLocaleString()]}),(0,i.jsx)("div",{className:"text-white/60",children:"Platform Cut"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"text-yellow-400 font-bold",children:["$",e.prize_pool.toLocaleString()]}),(0,i.jsx)("div",{className:"text-white/60",children:"Prize Pool"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"text-purple-400 font-bold",children:[e.total_revenue>0?Math.round(e.platform_cut/e.total_revenue*100):0,"%"]}),(0,i.jsx)("div",{className:"text-white/60",children:"Platform %"})]})]})]},e.id))})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,i.jsxs)(o(),{href:"/admin/create-contest",className:"group relative p-6 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20 hover:border-white/40 transition-all duration-300 transform hover:scale-105 text-center",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/20 to-blue-600/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,i.jsxs)("div",{className:"relative z-10",children:[(0,i.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDFC6"}),(0,i.jsx)("h3",{className:"text-white font-semibold mb-2",children:"Create Contest"}),(0,i.jsx)("p",{className:"text-white/60 text-sm",children:"Start a new creative competition"})]})]}),(0,i.jsxs)("div",{className:"group relative p-6 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20 hover:border-white/40 transition-all duration-300 transform hover:scale-105 text-center",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/20 to-pink-600/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,i.jsxs)("div",{className:"relative z-10",children:[(0,i.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCCA"}),(0,i.jsx)("h3",{className:"text-white font-semibold mb-2",children:"Analytics"}),(0,i.jsx)("p",{className:"text-white/60 text-sm",children:"View platform statistics"})]})]}),(0,i.jsxs)("div",{className:"group relative p-6 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20 hover:border-white/40 transition-all duration-300 transform hover:scale-105 text-center",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-500/20 to-orange-600/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,i.jsxs)("div",{className:"relative z-10",children:[(0,i.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDC65"}),(0,i.jsx)("h3",{className:"text-white font-semibold mb-2",children:"Manage Users"}),(0,i.jsx)("p",{className:"text-white/60 text-sm",children:"User management tools"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20 mb-8",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Active Contests"}),(0,i.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,i.jsx)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-white font-semibold",children:e.title}),(0,i.jsx)("p",{className:"text-white/60 text-sm",children:e.theme}),(0,i.jsxs)("p",{className:"text-white/40 text-xs",children:[new Date(e.start_date).toLocaleDateString()," - ",new Date(e.end_date).toLocaleDateString()]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsxs)("div",{className:"text-yellow-400 font-bold",children:["$",e.prize_pool.toLocaleString()]}),(0,i.jsxs)("div",{className:"text-white/60 text-sm",children:[e.submission_count," submissions"]}),(0,i.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("active"===e.status?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:e.status})]})]})},e.id))})]}),(0,i.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Next Contest Categories"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-white font-semibold mb-4",children:"Current Votes"}),(0,i.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,i.jsxs)("div",{className:"flex justify-between items-center bg-white/5 rounded-lg p-3",children:[(0,i.jsx)("span",{className:"text-white",children:e.category}),(0,i.jsxs)("span",{className:"text-yellow-400 font-bold",children:[e.vote_count," votes"]})]},e.id))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-white font-semibold mb-4",children:"Add New Category"}),(0,i.jsx)("div",{className:"space-y-3",children:["Abstract Art","Portrait Photography","Digital Illustration","Street Art","Nature Photography","Concept Art"].map(e=>(0,i.jsxs)("button",{onClick:()=>w(e),className:"w-full text-left px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors",children:["+ ",e]},e))})]})]})]})]})]}):(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:"Access Denied"}),(0,i.jsx)("p",{className:"text-white/60 mb-4",children:"You don't have permission to access this page."}),(0,i.jsx)(o(),{href:"/authenticated-home",className:"text-blue-400 hover:text-blue-300",children:"Return to Home"})]})}):(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:"Please sign in to access this page"}),(0,i.jsx)(o(),{href:"/login",className:"text-blue-400 hover:text-blue-300",children:"Sign In"})]})})}},6194:(e,t,s)=>{Promise.resolve().then(s.bind(s,2809))},8993:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var i=s(5155),r=s(9523),a=s(63);function l(){let e=(0,a.useRouter)(),t=(0,r.U)(),s=async()=>{await t.auth.signOut(),e.push("/"),e.refresh()};return(0,i.jsx)("button",{onClick:s,className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors",children:"Sign Out"})}}},e=>{e.O(0,[7559,2619,5239,521,8441,1255,7358],()=>e(e.s=6194)),_N_E=e.O()}]);
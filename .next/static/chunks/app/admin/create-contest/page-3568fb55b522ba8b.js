(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4714],{63:(e,t,s)=>{"use strict";var i=s(7260);s.o(i,"useParams")&&s.d(t,{useParams:function(){return i.useParams}}),s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}}),s.o(i,"useSearchParams")&&s.d(t,{useSearchParams:function(){return i.useSearchParams}})},1670:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var i=s(5155),a=s(9523),r=s(2115),l=s(63),n=s(2619),o=s.n(n);function d(){let[e,t]=(0,r.useState)({title:"",theme:"",description:"",start_date:"",end_date:"",prize_pool:1e3,max_submissions:100,rules:""}),[s,n]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[u,h]=(0,r.useState)({canCreateContests:!1,canManagePayouts:!1,canManagePlatform:!1}),[m,b]=(0,r.useState)(null),x=(0,l.useRouter)();(0,r.useEffect)(()=>{b((0,a.U)())},[]),(0,r.useEffect)(()=>{m&&(async()=>{let{data:{user:e}}=await m.auth.getUser();if(c(e),e){let{data:t}=await m.from("profiles").select("is_admin").eq("id",e.id).single();h({canCreateContests:!0,canManagePayouts:(null==t?void 0:t.is_admin)||e.email&&e.email.endsWith("@creativechallenge.app"),canManagePlatform:(null==t?void 0:t.is_admin)||e.email&&e.email.endsWith("@creativechallenge.app")})}})()},[m]);let p=async t=>{if(t.preventDefault(),n(!0),m)try{let{error:t}=await m.from("contests").insert([{...e,created_by:null==d?void 0:d.id,status:"active"}]);if(t)throw t;alert("Contest created successfully!"),x.push("/admin/dashboard")}catch(e){console.error("Error creating contest:",e),alert("Failed to create contest. Please try again.")}finally{n(!1)}};return d?u.canCreateContests?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 py-12",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)(o(),{href:"/admin/dashboard",className:"text-white/60 hover:text-white mb-4 inline-block",children:"← Back to Admin Dashboard"}),(0,i.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Create New Contest"}),(0,i.jsx)("p",{className:"text-white/60",children:"Set up a new creative competition for the community"})]}),(0,i.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20",children:(0,i.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Contest Title"}),(0,i.jsx)("input",{type:"text",value:e.title,onChange:s=>t({...e,title:s.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Digital Art Showdown",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Theme"}),(0,i.jsx)("input",{type:"text",value:e.theme,onChange:s=>t({...e,theme:s.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Fantasy & Magic",required:!0})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Description"}),(0,i.jsx)("textarea",{value:e.description,onChange:s=>t({...e,description:s.target.value}),rows:4,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe the contest theme, requirements, and what you're looking for...",required:!0})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Start Date"}),(0,i.jsx)("input",{type:"datetime-local",value:e.start_date,onChange:s=>t({...e,start_date:s.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"End Date"}),(0,i.jsx)("input",{type:"datetime-local",value:e.end_date,onChange:s=>t({...e,end_date:s.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Prize Pool ($)"}),(0,i.jsx)("input",{type:"number",value:e.prize_pool,onChange:s=>t({...e,prize_pool:Number(s.target.value)}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"100",step:"100",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Max Submissions"}),(0,i.jsx)("input",{type:"number",value:e.max_submissions,onChange:s=>t({...e,max_submissions:Number(s.target.value)}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"10",max:"1000",required:!0})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Contest Rules"}),(0,i.jsx)("textarea",{value:e.rules,onChange:s=>t({...e,rules:s.target.value}),rows:6,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"List the contest rules, submission guidelines, and judging criteria...",required:!0})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,i.jsx)(o(),{href:"/admin/dashboard",className:"px-6 py-3 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors",children:"Cancel"}),(0,i.jsx)("button",{type:"submit",disabled:s,className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-lg hover:from-pink-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50",children:s?"Creating...":"Create Contest"})]})]})})]})}):(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:"Access Denied"}),(0,i.jsx)("p",{className:"text-white/60 mb-4",children:"You don't have permission to access this page."}),(0,i.jsx)(o(),{href:"/authenticated-home",className:"text-blue-400 hover:text-blue-300",children:"Return to Home"})]})}):(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:"Please sign in to access this page"}),(0,i.jsx)(o(),{href:"/login",className:"text-blue-400 hover:text-blue-300",children:"Sign In"})]})})}},1701:(e,t,s)=>{Promise.resolve().then(s.bind(s,1670))},9523:(e,t,s)=>{"use strict";s.d(t,{U:()=>r});var i=s(7559),a=s(5704);function r(){let e=a.env.NEXT_PUBLIC_SUPABASE_URL||"https://yrbbqxdimyqdfmezxmgp.supabase.co",t=a.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlyYmJxeGRpbXlxZGZtZXp4bWdwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MjM5NjksImV4cCI6MjA3MjA5OTk2OX0.yR40mcHEsVoue4LDaT5GzKpbUk9VdwY7SeJ28JNBBKU";return(0,i.createBrowserClient)(e,t)}}},e=>{e.O(0,[7559,2619,8441,1255,7358],()=>e(e.s=1701)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[714],{63:(e,t,s)=>{"use strict";var i=s(7260);s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}})},1670:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var i=s(5155),l=s(9523),r=s(2115),a=s(63),n=s(2619),o=s.n(n);function c(){let[e,t]=(0,r.useState)({title:"",theme:"",description:"",start_date:"",end_date:"",prize_pool:1e3,max_submissions:100,rules:""}),[s,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)({canCreateContests:!1,canManagePayouts:!1,canManagePlatform:!1}),[h,x]=(0,r.useState)(null),b=(0,a.useRouter)();(0,r.useEffect)(()=>{x((0,l.U)())},[]),(0,r.useEffect)(()=>{h&&(async()=>{let{data:{user:e}}=await h.auth.getUser();if(d(e),e){let{data:t}=await h.from("profiles").select("is_admin").eq("id",e.id).single(),s=(null==t?void 0:t.is_admin)||!1;m({canCreateContests:s,canManagePayouts:(null==t?void 0:t.is_admin)||!1,canManagePlatform:(null==t?void 0:t.is_admin)||!1})}})()},[h]);let g=async t=>{if(t.preventDefault(),n(!0),h)try{let{error:t}=await h.from("contests").insert([{...e,created_by:null==c?void 0:c.id,status:"active"}]);if(t)throw t;alert("Contest created successfully!"),b.push("/admin")}catch(e){console.error("Error creating contest:",e),alert("Failed to create contest. Please try again.")}finally{n(!1)}};return c?u.canCreateContests?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 py-12",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)(o(),{href:"/admin/dashboard",className:"text-white/60 hover:text-white mb-4 inline-block",children:"← Back to Admin Dashboard"}),(0,i.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Create New Contest"}),(0,i.jsx)("p",{className:"text-white/60",children:"Set up a new creative competition for the community"})]}),(0,i.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20",children:(0,i.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Contest Name *"}),(0,i.jsxs)("div",{className:"bg-green-900/30 border border-green-500/30 rounded-lg p-4 mb-4",children:[(0,i.jsxs)("p",{className:"text-green-200 text-sm mb-2",children:[(0,i.jsx)("strong",{children:"Simple Contest System:"})," Just give your contest a name! Users will submit images and vote for the winner."]}),(0,i.jsx)("p",{className:"text-green-300 text-xs",children:"The winner will be automatically saved to the Hall of Fame."})]}),(0,i.jsx)("input",{type:"text",value:e.title,onChange:s=>t({...e,title:s.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg",placeholder:"e.g., Digital Art Showdown",required:!0})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Theme (Optional)"}),(0,i.jsx)("input",{type:"text",value:e.theme,onChange:s=>t({...e,theme:s.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Fantasy & Magic"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Max Submissions"}),(0,i.jsx)("input",{type:"number",value:e.max_submissions,onChange:s=>t({...e,max_submissions:Number(s.target.value)}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"10",max:"1000",required:!0})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Description"}),(0,i.jsx)("textarea",{value:e.description,onChange:s=>t({...e,description:s.target.value}),rows:4,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe the contest theme, requirements, and what you're looking for...",required:!0})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Start Date"}),(0,i.jsx)("input",{type:"datetime-local",value:e.start_date,onChange:s=>t({...e,start_date:s.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"End Date"}),(0,i.jsx)("input",{type:"datetime-local",value:e.end_date,onChange:s=>t({...e,end_date:s.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Prize System"}),(0,i.jsxs)("div",{className:"bg-blue-900/30 border border-blue-500/30 rounded-lg p-4 mb-4",children:[(0,i.jsxs)("p",{className:"text-blue-200 text-sm mb-2",children:[(0,i.jsx)("strong",{children:"New Prize System:"})," Each contest win is worth ",(0,i.jsx)("span",{className:"text-yellow-400 font-bold",children:"5 entries"})," into our future money draw!"]}),(0,i.jsx)("p",{className:"text-blue-300 text-xs",children:"Winners accumulate entries for a major cash prize announcement coming soon."})]}),(0,i.jsx)("input",{type:"number",value:e.prize_pool,onChange:s=>t({...e,prize_pool:Number(s.target.value)}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"1",placeholder:"Legacy prize pool (optional)"}),(0,i.jsx)("p",{className:"text-white/60 text-xs mt-1",children:"Legacy field - new system uses entry accumulation"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Max Submissions"}),(0,i.jsx)("input",{type:"number",value:e.max_submissions,onChange:s=>t({...e,max_submissions:Number(s.target.value)}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"10",max:"1000",required:!0})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-white font-medium mb-2",children:"Contest Rules"}),(0,i.jsx)("textarea",{value:e.rules,onChange:s=>t({...e,rules:s.target.value}),rows:6,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"List the contest rules, submission guidelines, and judging criteria...",required:!0})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,i.jsx)(o(),{href:"/admin/dashboard",className:"px-6 py-3 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors",children:"Cancel"}),(0,i.jsx)("button",{type:"submit",disabled:s,className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-lg hover:from-pink-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50",children:s?"Creating...":"Create Contest"})]})]})})]})}):(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:"Access Denied"}),(0,i.jsx)("p",{className:"text-white/60 mb-4",children:"You don't have permission to access this page."}),(0,i.jsx)(o(),{href:"/gallery",className:"text-blue-400 hover:text-blue-300",children:"Return to Gallery"})]})}):(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:"Please sign in to access this page"}),(0,i.jsx)(o(),{href:"/login",className:"text-blue-400 hover:text-blue-300",children:"Sign In"})]})})}},1701:(e,t,s)=>{Promise.resolve().then(s.bind(s,1670))},9523:(e,t,s)=>{"use strict";s.d(t,{U:()=>r});var i=s(7559),l=s(5704);function r(){let e=l.env.NEXT_PUBLIC_SUPABASE_URL||"https://yrbbqxdimyqdfmezxmgp.supabase.co",t=l.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlyYmJxeGRpbXlxZGZtZXp4bWdwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MjM5NjksImV4cCI6MjA3MjA5OTk2OX0.yR40mcHEsVoue4LDaT5GzKpbUk9VdwY7SeJ28JNBBKU";return(0,i.createBrowserClient)(e,t)}}},e=>{e.O(0,[619,559,441,255,358],()=>e(e.s=1701)),_N_E=e.O()}]);
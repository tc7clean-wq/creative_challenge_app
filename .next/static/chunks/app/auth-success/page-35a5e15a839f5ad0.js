(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7543],{63:(e,t,a)=>{"use strict";var s=a(7260);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},5200:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(5155),r=a(2115),l=a(9523);function i(e){let{onUsernameSelected:t,onCancel:a}=e,[i,n]=(0,r.useState)(""),[u,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[m,h]=(0,r.useState)(""),b=async e=>{if(!e.trim())return void c(null);if(e.length<3){h("Username must be at least 3 characters long"),c(!1);return}if(e.length>20){h("Username must be less than 20 characters"),c(!1);return}if(!/^[a-zA-Z0-9_]+$/.test(e)){h("Username can only contain letters, numbers, and underscores"),c(!1);return}o(!0),h("");try{let t=(0,l.U)(),{data:a,error:s}=await t.from("profiles").select("username").eq("username",e.toLowerCase()).single();s&&"PGRST116"===s.code?c(!0):a?(c(!1),h("This username is already taken")):(c(!1),h("Error checking username availability"))}catch(e){c(!1),h("Error checking username availability")}finally{o(!1)}},x=async e=>{if(e.preventDefault(),d&&i.trim())try{let e=(0,l.U)(),{data:{user:n}}=await e.auth.getUser();if(!n)return void h("You must be logged in to set a username");let{data:u}=await e.from("profiles").select("id").eq("id",n.id).single();if(u){let{error:t}=await e.from("profiles").update({username:i.toLowerCase()}).eq("id",n.id);if(t)return void h("Failed to set username. Please try again.")}else{var a,s,r;let{error:t}=await e.from("profiles").insert({id:n.id,username:i.toLowerCase(),full_name:(null==(a=n.user_metadata)?void 0:a.full_name)||(null==(s=n.email)?void 0:s.split("@")[0])||"User",avatar_url:(null==(r=n.user_metadata)?void 0:r.avatar_url)||null,is_artist:!1});if(t)return void h("Failed to create profile. Please try again.")}t(i.toLowerCase())}catch(e){h("Failed to set username. Please try again.")}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-8 border border-white/20 max-w-md w-full",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",style:{fontFamily:'var(--font-bebas-neue), "Arial Black", "Impact", sans-serif'},children:"CHOOSE YOUR USERNAME"}),(0,s.jsx)("p",{className:"text-white/80 mb-6",children:"Pick a unique username that represents you as an artist"}),(0,s.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-white font-semibold mb-2",children:"Username *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",value:i,onChange:e=>{let t=e.target.value.toLowerCase();n(t);let a=setTimeout(()=>{b(t)},500);return()=>clearTimeout(a)},placeholder:"Enter your username",className:"w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:border-yellow-500 pr-12",maxLength:20,required:!0}),u&&(0,s.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-yellow-500"})}),!u&&!0===d&&(0,s.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-500",children:"✓"}),!u&&!1===d&&(0,s.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-red-500",children:"✗"})]}),m&&(0,s.jsx)("p",{className:"text-red-400 text-sm mt-2",children:m}),!0===d&&(0,s.jsx)("p",{className:"text-green-400 text-sm mt-2",children:"✓ Username is available!"})]}),(0,s.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-white font-semibold mb-2",children:"Username Guidelines:"}),(0,s.jsxs)("ul",{className:"text-white/70 text-sm space-y-1",children:[(0,s.jsx)("li",{children:"• 3-20 characters long"}),(0,s.jsx)("li",{children:"• Letters, numbers, and underscores only"}),(0,s.jsx)("li",{children:"• Must be unique (no duplicates)"}),(0,s.jsx)("li",{children:"• Will be displayed as @username"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"submit",disabled:!d||u,className:"flex-1 bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-black font-bold py-3 px-6 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Checking...":"Set Username"}),(0,s.jsx)("button",{type:"button",onClick:a,className:"flex-1 bg-white/10 hover:bg-white/20 text-white py-3 px-6 rounded-lg transition-all duration-300",children:"Cancel"})]})]})]})})}},6523:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(5155),r=a(2115),l=a(9523),i=a(63),n=a(5200);function u(){let[e,t]=(0,r.useState)(!0),[a,u]=(0,r.useState)(!1),[,o]=(0,r.useState)(null),d=(0,i.useRouter)(),c=(0,r.useCallback)(async()=>{try{let e=(0,l.U)(),{data:{user:t}}=await e.auth.getUser();if(!t)return void d.push("/auth");o(t);let{data:a,error:s}=await e.from("profiles").select("username").eq("id",t.id).single();s?u(!0):(null==a?void 0:a.username)?d.push("/authenticated-home-simple"):u(!0)}catch(e){u(!0)}finally{t(!1)}},[d]);return((0,r.useEffect)(()=>{c()},[c]),e)?(0,s.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-white/80",children:"Setting up your account..."})]})}):a?(0,s.jsx)("div",{className:"min-h-screen bg-black relative overflow-hidden",children:(0,s.jsx)(n.A,{onUsernameSelected:()=>{d.push("/authenticated-home-simple")},onCancel:()=>{d.push("/auth")}})}):null}},8857:(e,t,a)=>{Promise.resolve().then(a.bind(a,6523))},9523:(e,t,a)=>{"use strict";a.d(t,{U:()=>l});var s=a(7559),r=a(5704);function l(){let e=r.env.NEXT_PUBLIC_SUPABASE_URL||"https://yrbbqxdimyqdfmezxmgp.supabase.co",t=r.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlyYmJxeGRpbXlxZGZtZXp4bWdwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1MjM5NjksImV4cCI6MjA3MjA5OTk2OX0.yR40mcHEsVoue4LDaT5GzKpbUk9VdwY7SeJ28JNBBKU";return(0,s.createBrowserClient)(e,t)}}},e=>{e.O(0,[7559,8441,1255,7358],()=>e(e.s=8857)),_N_E=e.O()}]);